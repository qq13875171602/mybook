!function(){var e=angular.module("myapp",["ngRoute","controllers","directives","services"]);angular.module("controllers",[]),angular.module("directives",[]),angular.module("services",[]),e.config(["$logProvider",function(e){e.debugEnabled(!0)}]),e.config(["$httpProvider",function(e){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var s=function(e){var o,t,n,a,i,l,d="";for(o in e)if((t=e[o])instanceof Array)for(l=0;l<t.length;l++)a=t[l],(i={})[o+"["+l+"]"]=a,d+=s(i)+"&";else if(t instanceof Object)for(n in t)a=t[n],(i={})[o+"."+n]=a,d+=s(i)+"&";else null!=t&&(d+=encodeURIComponent(o)+"="+encodeURIComponent(t)+"&");return d.length?d.substr(0,d.length-1):d};e.defaults.transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?s(e):e}]}]),e.config(["$routeProvider",function(e){e.when("/",{templateUrl:"html/user/user.html"}).when("/admin",{templateUrl:"html/user/admin/admin.html"}).when("/zhuce",{templateUrl:"html/user/zhuce/zhuce.html"}).when("/denglu",{templateUrl:"html/user/denglu/denglu.html"}).when("/yemian",{templateUrl:"html/user/houtai/yemian.html"}).when("/bokeTypeAdd",{templateUrl:"html/user/houtai/bokeTypeAdd.html"}).when("/book",{templateUrl:"html/user/houtai/book.html"}).when("/index.debug",{templateUrl:"/index.debug.html"}).otherwise({templateUrl:"html/user/user.html"})}])}(),angular.element(document).ready(function(){angular.module("myapp").run(["$rootScope","$log",function(e,o){o.info("测试模块"),e.title="网站项目"}]),angular.bootstrap(document,["myapp"])}),angular.module("controllers").controller("conpl",["$log","$scope","$location","datahttp","$rootScope","$window","Dataservice",function(e,t,n,o,a,i,l){e.debug("conpl"),t.$on("$destroy",function(){e.debug("销毁控制器")}),t.data={},a.name={},t.denglu=function(){l.wadlklog("正在登录中"),o.data("/denglu/Index",t.data,function(e,o){if(l.hidewardialog(),!e)return o.Souse?(l.setdialog("登录成功"),n.path("/yemian"),a.name=t.data.user,void(i.localStorage.mylocal=a.name)):void l.setdialog(o.Meassge);l.setdialog("服务器正忙")})},t.plo=function(){t.data={}}}]),angular.module("controllers").controller("tuichu",["$scope","$log","$location","datahttp",function(e,o,t,n){o.debug("tuichu..."),e.$on("$destroy",function(){o.debug("销毁控制器")}),e.close=function(){}}]),function(){var e=angular.module("directives");e.directive("aletDialog",["$log","Dataservice",function(n,a){return{restrict:"AE",template:"<div class='modal' style='z-index:1900;' role='dialog' tabindex='-1' data-backgrop='static' data-keyborad='false' >                 <div class='modal-dialog'>                      <div class='modal-content'>                       <div class='modal-header'>              <button type='button' class='close' data-dismiss='modal' aria-label='Close' >&times;</button>                      <span class='modal-title' ng-bind='atitle'></span>          </div>                          <div class='modal-body'>                 <span ng-bind='infos'></span>          </div>                    <div class='modal-footer'>           <button type='button' data-dismiss='modal' class='btn btn-primary' ng-bind='btnok'></button>     </div>       </div    </div>     </div>",replace:!0,link:function(e,o,t){e.$on("$destroy",function(){n.debug("销毁控制器")}),n.debug("aldiog",o),a.artDalog({scope:e,element:o})}}}]);e.directive("warDialog",["$log","Dataservice",function(n,a){return{restrict:"AE",template:"<div class='modal' role='dialog' data-backgrop='static' tabindex='-1' data-keyborad='false' style='z-index:1995'>     <div class='modal-dialog'>       <div class='modal-content'>             <div class='modal-header'>        <button type='button' class='close' data-dismiss='modal' aria-label='Close' >&times;</button>      <span  ng-bind='otitle'></span>                           </div>          <div class='modal-body'>     <span ng-bind='poinfo'></span>         </div>                                                                                 </div>                    </div>                        </div>",replace:!0,link:function(e,o,t){e.$on("$destroy",function(){n.debug("控制器销毁")}),n.debug("warDialog",o),a.warldaloh({scope:e,element:o})}}}]);e.directive("setqwDialog",["$log","Dataservice",function(n,a){return{restrict:"AE",template:"<div class='modal' role='dialog' data-backgrop='static' tabindex='-1' data-keyborad='false' style='z-index:1998'>     <div class='modal-dialog'>    <div class='modal-content'>      <div class='modal-header'>           <button type='button' class='close' data-dismiss='modal'  aria-label='Close'>&times;</button>        <span  ng-bind='titlesad'></span>                                       </div>                 <div class='modal-body'>    <span ng-bind='qwinfo'></span>     </div>                  <div class='modal-footer'>     <button type='button' data-dismiss='modal' class='btn btn-primary' ng-click='comlp()'  ng-bind='mjbynok'></button>        <button type='button' data-misdiss='modal' class='btn btn-info' ng-click='nolkp()' ng-bind='qnok' ></button>                                  </div>                                           </div>                                     </div>                        </div>",replace:!0,link:function(e,o,t){e.$on("$destroy",function(){n.debug("控制器销毁")}),n.debug("setqwDialog",o),a.setqwpdiao({scope:e,element:o}),e.comlp=a.tyshg,e.nolkp=a.sacha}}}]);e.directive("customDialog",["$log","Dataservice",function(n,a){return n.debug("directive custom-dialog..."),{restrict:"AE",template:"<div class='modal' data-backdrop='static' data-keyboard='false' tabindex='-1' role='dialog' style='z-index: 1500;'>    <div class='modal-dialog' role='document'>        <div class='modal-content'>            <div class='modal-header'>    <button type='button' class='close' data-dismiss='modal'  aria-label='Close'>&times;</button>            <div class='modal-title' ng-bind='customTitle'></div>            </div>            <div class='modal-body'>                <div ng-include='customPage'></div>            </div>        </div>    </div></div>",replace:!0,link:function(e,o,t){e.$on("$destroy",function(){n.debug("directive custom-dialog destroy...")}),n.debug("directive custom-dialog init==>",o),a.setCustomDialog({scope:e,element:o})}}}])}(),angular.module("controllers").controller("plk",["$log","$scope","datahttp","$rootScope","Dataservice",function(t,n,o,a,i){t.debug("plk"),n.$on("$destroy",function(){t.debug("销毁控制器")}),n.op=!0,n.bn=!0,n.like={},n.shuju={},n.query={},n.mohu={},n.lick=function(){n.op=!1},n.ke=function(){n.op=!0},n.zx=function(){n.bn=!1},n.cv=function(){n.bn=!0},n.add=function(){i.wadlklog("正在进入中"),o.data("/houtai/Index",n.shuju,function(e,o){return i.hidewardialog(),e?(i.setdialog("服务器忙"),void t.debug("err",e)):o.Souse?(i.awstdialog("添加成功",function(){i.hidedialog()},function(){i.hidedialog()}),n.shuju.Booktype={},void n.ag()):void 0})},n.ag=function(){i.wadlklog("正在进入中"),o.data("/houtai/Query",{},function(e,o){if(i.hidewardialog(),!e)return o.Souse?(n.pl=o.List,void(n.like.book={Tid:n.pl[0].tid})):void 0;i.setdialog("查询失败")})},n.ag(),n.tianjia=function(){i.wadlklog("正在添加中"),o.data("/houtai/Add",n.like,function(e,o){if(i.hidewardialog(),!e)return o.Souse?(i.setdialog("添加成功",function(){i.hidedialog()}),void n.okl()):void 0;i.setdialog("添加失败",function(){i.hidedialog()})})},n.okl=function(){o.data("/houtai/select",{"page.PageSize":4,"page.PageNumber":1},function(e,o){if(!e)return o.Souse?(console.log("查询成功"),n.query=o.list,void(n.page=o.page)):void 0;console.log("查询失败")})},n.okl(),n.sd=function(e){o.data("/houtai/select",{"page.PageSize":4,"page.PageNumber":e},function(e,o){if(!e)return o.Souse?(console.log("查询成功"),n.query=o.list,void(n.page=o.page)):void 0;console.log("查询失败")})},n.qw=function(e){o.data("/houtai/select",{"page.PageSize":4,"page.PageNumber":e},function(e,o){if(!e)return o.Souse?(console.log("查询成功"),n.query=o.list,void(n.page=o.page)):void 0;console.log("查询失败")})},n.ty=function(e){o.data("/houtai/select",{"page.PageSize":4,"page.PageNumber":e},function(e,o){if(!e)return o.Souse?(console.log("查询成功"),n.query=o.list,void(n.page=o.page)):void 0;console.log("查询失败")})},n.delete=function(e){i.wadlklog("正在删除中"),o.data("/houtai/delete",{"book.bid":e},function(e,o){if(i.hidewardialog(),!e)return o.Souse?(i.setdialog("删除成功",function(){}),void n.okl()):void i.setdialog(o.Meassge);i.setdialog("服务器正忙")})},n.chaxunqw=function(e){o.data("/houtai/querybook",{"book.bid":e},function(e,o){return e?(i.setdialog("查询失败"),void t.debug(e)):o.Souse?(i.showCustomDialog("/html/user/houtai/xiugai.html"),void(a.nbgf=o.Polki)):void 0})},n.xuigai=function(e){i.wadlklog("正在修改中"),o.data("/houtai/update",{"book.bid":e,book:n.zbvc},function(e,o){i.hidewardialog(),e?i.setdialog("服务器正忙"):o.Souse?i.setdialog("修改成功",function(){i.hideCustomDialog(),n.okl()}):i.setdialog(o.Meassge)})}}]),angular.module("controllers").controller("mask",["$log","$scope","Dataservice","datahttp",function(e,o,t,n){e.debug("controllers.mask"),o.$on("$destroy",function(){e.debug("控制器销毁")}),o.add=function(){t.wadlklog("正在加载中"),n.data("/QianAdd/Index",o.vb,function(e,o){t.hidewardialog(),e?t.setdialog("添加失败"):o.Souse&&t.setdialog("添加成功",function(){})})}}]),angular.module("controllers").controller("denglu",["$log","$scope","Dataservice",function(e,o,t){e.debug("controllers.denglu"),o.$on("$destroy",function(){e.debug("denglu,销毁控制台")}),o.add=function(){t.showCustomDialog("/html/user/qiantai/denglu.html")},o.zhuce=function(){t.showCustomDialog("/html/user/qiantai/zhuce.html")}}]),angular.module("controllers").controller("dengl",["$log","$scope","Dataservice","datahttp",function(e,o,t,n){e.debug("controller.dengl"),o.$on("$destroy",function(){e.debug("销毁控制器")}),o.po={},o.deng=function(){t.wadlklog("正在登录中"),n.data("/Qiandenglu/Index",o.po,function(e,o){t.hidewardialog(),e?t.setdialog("登录失败"):o.Souse&&t.setdialog("登录成功",function(){t.hideCustomDialog()})})},o.chongzi=function(){o.po={}}}]),angular.module("services").factory("Dataservice",["$log","$timeout",function(n,a){n.debug("Dataservice"),service={};var i="图书管理",l=null;service.alttitle=function(e){l=e},service.temptitle=function(e){i=e};var t=null;service.tempbtnok=function(e){t=e};var d={huidiao:angular.noop,couhs:!1};service.artDalog=function(e){n.debug("Dataservice.artDalog",e),d.scope=e.scope,d.element=e.element,d.element.on("hidden.bs.modal",function(){var e=d.huidiao;d.huidiao=angular.noop,e()}),d.couhs=!0},service.setdialog=function(e,o){d.couhs&&a(function(){d.huidiao=o||angular.noop,d.scope.infos=e,d.scope.atitle=l||i,d.scope.btnok=t||"确认",l=t=null,d.element.modal("show")})},service.hidedialog=function(){d.element.modal("hide")};var s={huidiao:angular.noop,couhs:!1};service.warldaloh=function(e){n.debug("Dataservice.warldaloh",e),s.scope=e.scope,s.element=e.element,s.element.on("hidden.bs.modal",function(){var e=s.huidiao;s.huidiao=angular.noop,e()}),s.couhs=!0},service.wadlklog=function(e,o){s.couhs?a(function(){s.huidiao=o||angular.noop,s.scope.poinfo=e,s.scope.otitle=i||l,l=null,s.element.modal("show")}):n.debug("wadlklog")},service.hidewardialog=function(){s.element.modal("hide")};var u="确认",c="取消",r=null,g=null;service.pok=function(e){u=e},service.mnok=function(e){c=e},service.wsca=function(e){r=e},service.lpo=function(e){g=e};var m={yes:angular.nnop,lno:angular.noop,chons:"no",couhs:!1};service.setqwpdiao=function(e){n.debug("Dataservice.setqwpdiao",e),m.scope=e.scope,m.element=e.element,m.couhs=!0},service.awstdialog=function(e,o,t){m.couhs&&a(function(){m.yes=o||angular.noop,m.lno=t||angular.noop,m.scope.qwinfo=e,m.scope.titlesad=l||i,l=null,m.scope.mjbynok=u||r,r=null,m.scope.qnok=c||g,g=null,m.element.on("hidden.bs.modal",function(){var e="no"==m.chons?m.yes:m.lno;m.chons="no",m.yes=angular.noop,m.lno=angular.noop,e()}),m.element.modal("show")},4e3)},service.wqer=function(){m.element.modal("hide")},service.tyshg=function(){m.chons="yes",m.element.modal("hide")},service.sacha=function(){m.chons="no",m.element.modal("hide")};var p={closefn:angular.noop,hasinit:!1,data:{}};return service.setCustomDialog=function(e){n.debug("DialogService.setCustomDialog==>",e),p.scope=e.scope,p.element=e.element,p.element.on("hidden.bs.modal",function(){var e=p.closefn;p.closefn=angular.noop,e()}),p.hasinit=!0},service.showCustomDialog=function(e,o,t){p.hasinit?a(function(){p.scope.customPage=e,e="",p.data=o||{},p.closefn=t||angular.noop,p.scope.customTitle=l||i,l=null,p.element.modal("show")}):n.debug("DialogService.showCustomDialog not init...")},service.hideCustomDialog=function(){p.element.modal("hide")},service.getCustomData=function(){var e=p.data;return p.data={},e},service}]),angular.module("services").factory("datahttp",["$log","$http",function(n,a){var i=["http://localhost:1050","http://120.77.205.162:1050"],e={data:function(e,o,t){n.debug("http service===>",i[1]+e),a({method:"POST",url:i[1]+e,data:o}).then(function(e){n.debug("正确信息",e.data),t(null,e.data)},function(e){n.debug("错误信息",e),t(e,null)})}},r=["星期六","星期一","星期二","星期三","星期四","星期五","星期天"];return e.time=function(e,o){var t=new Date;e&&t.setTime(e),o||o("y-m-d");var n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),l=t.getHours(),d=t.getMinutes(),s=t.getSeconds(),u=t.getDay();a=a<10?"0"+a:""+a,i=i<10?"0"+i:""+i,l=l<10?"0"+l:""+l,d=d<10?"0"+d:""+d,s=s<10?"0"+s:""+s,u=r[u];var c=o.replace("y",n);return c=(c=(c=(c=(c=(c=c.replace("m",a)).replace("d",i)).replace("h",l)).replace("i",d)).replace("s",s)).replace("w",u)},e}]),angular.module("controllers").controller("contr",["$scope","$log","datahttp","$location",function(e,o,t,n){o.debug("contr...."),e.$on("$destroy",function(){o.debug("销毁控制器")}),e.user={},e.dataas=function(){t.data("/zhuce/Index",e.user,function(e,o){e.Souse?console.log("添加成功"):err&&console.log("添加失败")})},e.kong=function(){e.user={}}}]);